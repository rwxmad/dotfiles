###################
###  VARIABLES  ###
###################

source = hyprvars.conf

env = LIBVA_DRIVER_NAME,nvidia
env = __GLX_VENDOR_LIBRARY_NAME,nvidia

$system_theme = Everforest-Dark-Medium
$cursor_theme = Everforest-Dark-Medium
$icon_theme   = Everforest-Dark-Medium
$cursor_size  = 12
$dpi_scale    = 1
$text_scale   = 1

$terminal = ghostty
$browser = zen-browser
$launcher = rofi -show combi
$fileManager = dolphin
$clipboard = ~/.config/rofi/scripts/cliphist/run
$web_search = ~/.config/rofi/scripts/web-search.sh

#################
### GTK THEME ###
#################

exec=gsettings set org.gnome.desktop.interface gtk-theme $system_theme
exec=gsettings set org.gnome.desktop.interface icon-theme $icon_theme
exec=gsettings set org.gnome.desktop.interface cursor-theme $cursor_theme
exec=gsettings set org.gnome.desktop.interface text-scaling-factor $text_scale
exec=gsettings set org.gnome.desktop.interface cursor-size $cursor_size
exec=sleep 5; gsettings set org.gnome.desktop.interface color-scheme 'prefer-dark'

#################
### AUTOSTART ###
#################

exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = /usr/lib/mate-polkit/polkit-mate-authentication-agent-1
exec-once = waybar
exec-once = hyprpaper
exec-once = nm-applet
exec-once = dunst
exec-once = hypridle
exec-once = wl-clip-persist --clipboard regular
exec-once = wl-paste --type text --watch cliphist store # Stores only text data
exec-once = wl-paste --type image --watch cliphist store # Stores only image data


workspace = 1,  persistent:true
workspace = 2,  persistent:true
workspace = 3,  persistent:true
workspace = 4,  persistent:true
workspace = 5,  persistent:true
workspace = 6,  persistent:true
workspace = 7,  persistent:true
workspace = 8,  persistent:true
workspace = 9,  persistent:true
workspace = 10, persistent:true

exec-once = [workspace 1 silent] $terminal
exec-once = [workspace 2 silent] $browser
exec-once = [workspace 3 silent] spotify
exec-once = [workspace 4 silent] obsidian
exec-once = [workspace 5 silent] inkscape
exec-once = [workspace 6 silent] discord
# exec-once = [workspace 7 silent]
exec-once = [workspace 8 silent] orca-slicer
# exec-once = [workspace 9 silent]
# exec-once = [workspace 10 silent]

#############################
### ENVIRONMENT VARIABLES ###
#############################

env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_DESKTOP,Hyprland
env = WLR_NO_HARDWARE_CURSORS,1

env = XCURSOR_SIZE, $cursor_size
env = HYPRCURSOR_SIZE, $cursor_size

###################
### KEYBINDINGS ###
###################

$meh = CONTROL SHIFT ALT
$mod = SUPER

bind = $mod, Q, killactive,
# bind = $mod, M, exit,
bind = $mod, return,          exec, $terminal
bind = $mod, SPACE,           exec, $launcher
bind = $mod, S,               exec, $web_search
bind = $mod, F,               fullscreen,
bind = $mod, P,               pseudo,
bind = $mod, E,               exec, $fileManager
bind = $mod, R,               togglesplit,
bind = $mod, T,               togglefloating,
bind = $mod, V,               exec, $clipboard
bind = $mod ALT, L,           exec, hyprlock
bind = $mod, C, exec,         hyprpicker -a -f hex

### Switch workspaces ###
bind = $mod, 1,     workspace, 1
bind = $mod, 2,     workspace, 2
bind = $mod, 3,     workspace, 3
bind = $mod, 4,     workspace, 4
bind = $mod, 5,     workspace, 5
bind = $mod, 6,     workspace, 6
bind = $mod, 7,     workspace, 7
bind = $mod, 8,     workspace, 8
bind = $mod, 9,     workspace, 9
bind = $mod, 0,     workspace, 10

### Move active window to a workspace ###
bind = $mod ALT, 1, movetoworkspace, 1
bind = $mod ALT, 2, movetoworkspace, 2
bind = $mod ALT, 3, movetoworkspace, 3
bind = $mod ALT, 4, movetoworkspace, 4
bind = $mod ALT, 5, movetoworkspace, 5
bind = $mod ALT, 6, movetoworkspace, 6
bind = $mod ALT, 7, movetoworkspace, 7
bind = $mod ALT, 8, movetoworkspace, 8
bind = $mod ALT, 9, movetoworkspace, 9
bind = $mod ALT, 0, movetoworkspace, 10

# Move focus
bind = $mod, H,     movefocus, l
bind = $mod, J,     movefocus, d
bind = $mod, K,     movefocus, u
bind = $mod, L,     movefocus, r
bind = $mod SHIFT, H, movewindow, l
bind = $mod SHIFT, J, movewindow, d
bind = $mod SHIFT, K, movewindow, u
bind = $mod SHIFT, L, movewindow, r

bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPrev, exec, playerctl previous

# for laptops
# bindel = ,XF86MonBrightnessUp, exec, brightnessctl -e4 -n2 set 5%+
# bindel = ,XF86MonBrightnessDown, exec, brightnessctl -e4 -n2 set 5%-

# NOTE: lags
bindel = ,XF86MonBrightnessUp, exec, ddcutil setvcp 10 + 10
bindel = ,XF86MonBrightnessDown, exec, ddcutil setvcp 10 - 10

# Screenshot
bind =, Print, exec, grim -g "$(slurp)" - | wl-copy && wl-paste > ~/Pictures/Screenshots/Screenshot-$(date +%F_%T).png | dunstify "Screenshot of the region taken" -t 1000 # screenshot of a region
bind = SHIFT, Print, exec, grim - | wl-copy && wl-paste > ~/Pictures/Screenshots/Screenshot-$(date +%F_%T).png | dunstify "Screenshot of whole screen taken" -t 1000 # screenshot of the whole screen

# Scroll through existing workspaces with mouse side buttons
bind = , mouse:275, workspace, e-1
bind = , mouse:276, workspace, e+1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mod, mouse:272, movewindow
bindm = $mod, mouse:273, resizewindow

### Zoom
bind = $mod, mouse_down, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '.float * 1.1') # mouse zoom in
bind = $mod, mouse_up, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '(.float * 0.9) | if . < 1 then 1 else . end') # mouse zoom out

binde = $mod, minus, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '(.float * 0.9) | if . < 1 then 1 else . end') # zoom out
binde = $mod, KP_ADD, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '.float * 1.1') # zoom in
bind = $mod, KP_EQUAL, exec, hyprctl -q keyword cursor:zoom_factor 1 # reset zoom

##############################
### WINDOWS AND WORKSPACES ###
##############################

# windowrulev2 = workspace 1, class:^(ghostty)$
windowrulev2 = workspace 2, class:^(zen)$
windowrulev2 = workspace 3, class:^(spotify)$
windowrulev2 = workspace 4, class:^(obsidian)$
windowrulev2 = workspace 5, class:^(inkscape)$
windowrulev2 = workspace 6, class:^(discord)$
# windowrulev2 = workspace 7, class:^()$
windowrulev2 = workspace 8, class:^(OrcaSlicer)$
# windowrulev2 = workspace 9, class:^()$
# windowrulev2 = workspace 10, class:^(steam)$

# file manager
windowrulev2 = float, class:^(org.kde.dolphin)$
windowrulev2 = size 50% 50%, class:^(org.kde.dolphin)$

# social
windowrulev2 = float, class:org.telegram.desktop
windowrulev2 = size 600 800, class:org.telegram.desktop

# Ignore maximize requests from apps. You'll probably like this.
windowrule = suppressevent maximize, class:.*

# Fix some dragging issues with XWayland
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0
